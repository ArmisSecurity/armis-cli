name: Security Scan

on:
  workflow_dispatch:  # Manual trigger
  schedule:
    - cron: '0 6 * * *'  # Daily at 06:00 UTC

permissions:
  contents: read
  security-events: write
  actions: read
  pull-requests: write

jobs:
  scan:
    uses: ./.github/workflows/reusable-security-scan.yml
    with:
      scan-type: repo
      scan-target: '.'
      fail-on: ''  # Don't fail on findings
      pr-comment: false  # No PR context for scheduled runs
      upload-artifact: true
      scan-timeout: 120  # 2 hours
      build-from-source: false
    secrets:
      api-token: ${{ secrets.ARMIS_API_TOKEN }}
      tenant-id: ${{ secrets.ARMIS_TENANT_ID }}
